<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon: Suppress 404 error (Sprint 1 Task 1.4) -->
    <link rel="icon" href="data:,">
    <!-- Content Security Policy: Reduce extension script injection -->
    <meta http-equiv="Content-Security-Policy" 
          content="script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; 
                   object-src 'none'; 
                   base-uri 'self'; 
                   frame-ancestors 'none';">
    <title>Audio Voice Service - Painel de Controle</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/webui/assets/css/styles.css?v=3.0">
    <!-- App JS (defer ensures execution after DOM ready) -->
    <script defer src="/webui/assets/js/app.js?v=3.7"></script>
</head>
<body>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" onclick="app.navigate('dashboard')">
                <i class="bi bi-mic-fill"></i> Audio Voice Service
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.navigate('dashboard')">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.navigate('create-job')">
                            <i class="bi bi-plus-circle"></i> Criar Job
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.navigate('jobs')">
                            <i class="bi bi-list-task"></i> Jobs & Downloads
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.navigate('voices')">
                            <i class="bi bi-person-voice"></i> Vozes Clonadas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.navigate('quality-profiles')">
                            <i class="bi bi-sliders"></i> Perfis de Qualidade
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.navigate('training')">
                            <i class="bi bi-cpu-fill"></i> Training
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-gear"></i> Admin
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="app.navigate('admin')">
                                <i class="bi bi-heart-pulse"></i> Health & Stats
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="app.navigate('feature-flags')">
                                <i class="bi bi-flag"></i> Feature Flags
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999; margin-top: 60px;">
        <div id="toast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto" id="toast-title">Notifica√ß√£o</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-body"></div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid main-content">

        <!-- ==================== DASHBOARD ==================== -->
        <section id="section-dashboard" class="content-section">
            <h1 class="mb-4"><i class="bi bi-speedometer2"></i> Dashboard</h1>
            
            <div class="row">
                <!-- Status da API -->
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <i class="bi bi-check-circle"></i> Status da API
                        </div>
                        <div class="card-body" id="dashboard-api-status">
                            <div class="text-center">
                                <div class="spinner-border text-primary" role="status"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Estat√≠sticas do Sistema -->
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <i class="bi bi-bar-chart"></i> Estat√≠sticas do Sistema
                        </div>
                        <div class="card-body" id="dashboard-stats">
                            <div class="text-center">
                                <div class="spinner-border text-success" role="status"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- √öltimos Jobs -->
                <div class="col-md-6 mb-3">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <i class="bi bi-clock-history"></i> √öltimos Jobs
                        </div>
                        <div class="card-body" id="dashboard-recent-jobs">
                            <div class="text-center">
                                <div class="spinner-border text-warning" role="status"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- √öltimas Vozes -->
                <div class="col-md-6 mb-3">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <i class="bi bi-person-voice"></i> √öltimas Vozes Clonadas
                        </div>
                        <div class="card-body" id="dashboard-recent-voices">
                            <div class="text-center">
                                <div class="spinner-border text-secondary" role="status"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-3">
                <button class="btn btn-primary btn-lg" onclick="app.loadDashboard()">
                    <i class="bi bi-arrow-clockwise"></i> Atualizar Dashboard
                </button>
            </div>
        </section>

        <!-- ==================== DUBLAR TEXTO (CREATE JOB) ==================== -->
        <section id="section-create-job" class="content-section" style="display: none;">
            <h1 class="mb-4"><i class="bi bi-plus-circle"></i> Criar Job de Dublagem</h1>
            
            <div class="card">
                <div class="card-body">
                    <form id="form-create-job">
                        <!-- Texto para dublar -->
                        <div class="mb-3">
                            <label class="form-label">
                                <i class="bi bi-chat-text"></i> Texto para Dublar *
                                <small class="text-muted">(1-10.000 caracteres)</small>
                            </label>
                            <textarea class="form-control" id="job-text" rows="4" required 
                                minlength="1" maxlength="10000"
                                placeholder="Digite o texto que deseja converter em √°udio..."></textarea>
                            <div class="form-text">Caracteres: <span id="text-counter">0</span> / 10000</div>
                        </div>

                        <div class="row">
                            <!-- Idioma de origem -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-translate"></i> Idioma de Origem *
                                </label>
                                <select class="form-select" id="job-source-language" required>
                                    <option value="">Carregando...</option>
                                </select>
                            </div>

                            <!-- Idioma de destino -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-globe"></i> Idioma de Destino
                                    <small class="text-muted">(opcional)</small>
                                </label>
                                <select class="form-select" id="job-target-language">
                                    <option value="">Mesmo que origem</option>
                                </select>
                            </div>
                        </div>

                        <!-- Modo -->
                        <div class="mb-3">
                            <label class="form-label">
                                <i class="bi bi-toggles"></i> Modo de Opera√ß√£o *
                            </label>
                            <select class="form-select" id="job-mode" required>
                                <option value="dubbing">Voz Gen√©rica (Preset)</option>
                                <option value="dubbing_with_clone">Voz Clonada</option>
                            </select>
                        </div>

                        <!-- Voice Preset (se mode = dubbing) -->
                        <div class="mb-3" id="container-voice-preset">
                            <label class="form-label">
                                <i class="bi bi-mic"></i> Voz Gen√©rica (Preset) *
                            </label>
                            <select class="form-select" id="job-voice-preset">
                                <option value="">Carregando...</option>
                            </select>
                        </div>

                        <!-- Voice ID (se mode = dubbing_with_clone) -->
                        <div class="mb-3" id="container-voice-id" style="display: none;">
                            <label class="form-label">
                                <i class="bi bi-person-voice"></i> Voz Clonada *
                            </label>
                            <select class="form-select" id="job-voice-id">
                                <option value="">Carregando...</option>
                            </select>
                        </div>

                        <div class="row">
                            <!-- TTS Engine -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-cpu"></i> Engine de TTS *
                                </label>
                                <select class="form-select" id="job-tts-engine" required>
                                    <option value="xtts">XTTS-v2 (Recomendado)</option>
                                </select>
                                <small class="text-muted">v2.0: Apenas XTTS dispon√≠vel</small>
                            </div>

                            <!-- Perfil de Qualidade -->
                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-sliders"></i> Perfil de Qualidade
                                </label>
                                <select class="form-select" id="job-quality-profile">
                                    <option value="fast">‚ö° R√°pido (~2s/req)</option>
                                    <option value="balanced" selected>‚öñÔ∏è Balanceado (~3s/req)</option>
                                    <option value="high_quality">üéØ Alta Qualidade (~5s/req + denoise)</option>
                                </select>
                                <small class="text-muted">
                                    <strong>Alta Qualidade:</strong> Inclui noise reduction para melhor √°udio
                                </small>
                            </div>
                        </div>

                        <!-- Ref Text (Optional) -->
                        <div class="mb-3">
                            <label class="form-label">
                                <i class="bi bi-file-text"></i> Texto de Refer√™ncia
                                <small class="text-muted">(opcional)</small>
                            </label>
                            <input type="text" class="form-control" id="job-ref-text"
                                placeholder="Deixe vazio para transcri√ß√£o autom√°tica">
                        </div>

                        <!-- Bot√£o Submit -->
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg" id="btn-create-job">
                                <i class="bi bi-check-circle"></i> Criar Job de Dublagem
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- ==================== JOBS & DOWNLOADS ==================== -->
        <section id="section-jobs" class="content-section" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="mb-0"><i class="bi bi-list-task"></i> Jobs & Downloads</h1>
                <button class="btn btn-primary" onclick="app.loadJobs()">
                    <i class="bi bi-arrow-clockwise"></i> Atualizar
                </button>
            </div>
            
            <!-- Controles e Filtros Avan√ßados -->
            <div class="card mb-4 shadow-sm">
                <div class="card-header bg-gradient bg-primary text-white">
                    <i class="bi bi-funnel"></i> Filtros e Controles
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <!-- Busca em Tempo Real -->
                        <div class="col-md-6">
                            <label class="form-label fw-bold">
                                <i class="bi bi-search"></i> Buscar por Job ID
                            </label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="search-job-id" 
                                    placeholder="Digite para filtrar em tempo real..."
                                    oninput="app.filterJobsInRealTime(this.value.trim().toLowerCase())">
                                <button class="btn btn-outline-secondary" onclick="app.clearJobSearch()" title="Limpar busca">
                                    <i class="bi bi-x-circle"></i>
                                </button>
                            </div>
                            <small class="text-muted">Filtragem instant√¢nea ao digitar</small>
                        </div>
                        
                        <!-- Filtro por Status -->
                        <div class="col-md-3">
                            <label class="form-label fw-bold">
                                <i class="bi bi-filter"></i> Status
                            </label>
                            <select class="form-select" id="filter-status" onchange="app.filterJobsByStatus(this.value)">
                                <option value="all">Todos os status</option>
                                <option value="completed">Conclu√≠do</option>
                                <option value="processing">Processando</option>
                                <option value="pending">Pendente</option>
                                <option value="failed">Falhou</option>
                            </select>
                        </div>
                        
                        <!-- Limite de Resultados -->
                        <div class="col-md-3">
                            <label class="form-label fw-bold">
                                <i class="bi bi-list-ol"></i> Limite de Jobs
                            </label>
                            <select class="form-select" id="jobs-limit" onchange="app.loadJobs()">
                                <option value="10">10 jobs</option>
                                <option value="20" selected>20 jobs</option>
                                <option value="50">50 jobs</option>
                                <option value="100">100 jobs</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="row mt-3">
                        <div class="col-12">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="jobs-auto-refresh" onchange="app.toggleAutoRefresh()">
                                <label class="form-check-label" for="jobs-auto-refresh">
                                    <i class="bi bi-arrow-repeat"></i> Atualiza√ß√£o autom√°tica (a cada 10 segundos)
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabela de Jobs Moderna -->
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-table"></i> Lista de Jobs</span>
                    <span id="jobs-count-badge" class="badge bg-light text-primary">0 jobs</span>
                </div>
                <div class="card-body p-0">
                    <div id="jobs-table-container">
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Carregando...</span>
                            </div>
                            <p class="mt-3 text-muted">Carregando jobs...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== VOZES CLONADAS ==================== -->
        <section id="section-voices" class="content-section" style="display: none;">
            <h1 class="mb-4"><i class="bi bi-person-voice"></i> Vozes Clonadas</h1>
            
            <!-- Formul√°rio de Clonagem -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <i class="bi bi-plus-circle"></i> Clonar Nova Voz
                </div>
                <div class="card-body">
                    <form id="form-clone-voice">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-file-earmark-music"></i> √Åudio de Refer√™ncia *
                                </label>
                                <input type="file" class="form-control" id="clone-audio-file" 
                                    accept="audio/wav,audio/mpeg,audio/mp3,audio/ogg,audio/flac,audio/x-m4a,audio/mp4,.wav,.mp3,.ogg,.flac,.m4a" 
                                    required>
                                <div class="form-text">WAV, MP3, OGG, FLAC, M4A (m√°x. 50MB)</div>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-tag"></i> Nome da Voz *
                                </label>
                                <input type="text" class="form-control" id="clone-voice-name" 
                                    required placeholder="Ex: Jo√£o Narrador">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-translate"></i> Idioma *
                                </label>
                                <select class="form-select" id="clone-language" required>
                                    <option value="">Carregando...</option>
                                </select>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-cpu"></i> Engine de TTS *
                                </label>
                                <select class="form-select" id="clone-tts-engine" required>
                                    <option value="xtts">XTTS</option>
                                </select>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label class="form-label">
                                    <i class="bi bi-file-text"></i> Texto de Refer√™ncia
                                    <small class="text-muted">(opcional)</small>
                                </label>
                                <input type="text" class="form-control" id="clone-ref-text"
                                    placeholder="Auto-transcrito se vazio">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">
                                <i class="bi bi-chat-left-text"></i> Descri√ß√£o
                                <small class="text-muted">(opcional)</small>
                            </label>
                            <textarea class="form-control" id="clone-description" rows="2"
                                placeholder="Descri√ß√£o da voz..."></textarea>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-success btn-lg" id="btn-clone-voice">
                                <i class="bi bi-check-circle"></i> Iniciar Clonagem
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Clonagens em Andamento -->
            <div class="card mb-4" id="cloning-jobs-card" style="display: none;">
                <div class="card-header bg-warning">
                    <i class="bi bi-hourglass-split"></i> Clonagens em Andamento
                </div>
                <div class="card-body" id="cloning-jobs-list"></div>
            </div>

            <!-- Lista de Vozes Clonadas -->
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-people"></i> Vozes Dispon√≠veis
                    <button class="btn btn-sm btn-light float-end" onclick="app.loadVoices()">
                        <i class="bi bi-arrow-clockwise"></i> Atualizar
                    </button>
                </div>
                <div class="card-body" id="voices-list-container">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status"></div>
                        <p class="mt-2">Carregando vozes...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== PERFIS DE QUALIDADE ==================== -->
        <section id="section-quality-profiles" class="content-section" style="display: none;">
            <h1 class="mb-4"><i class="bi bi-sliders"></i> Perfis de Qualidade</h1>
            
            <div class="mb-4">
                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal-create-profile">
                    <i class="bi bi-plus-circle"></i> Criar Novo Perfil
                </button>
            </div>

            <!-- Quality Profiles -->
            <div class="card mt-3">
                <div class="card-body" id="xtts-profiles-container">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== ADMIN & HEALTH ==================== -->
        <section id="section-admin" class="content-section" style="display: none;">
            <h1 class="mb-4"><i class="bi bi-heart-pulse"></i> Admin & Health</h1>
            
            <div class="row">
                <!-- Health B√°sico -->
                <div class="col-md-6 mb-3">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <i class="bi bi-check-circle"></i> Health Check B√°sico
                        </div>
                        <div class="card-body" id="admin-health-basic">
                            <div class="text-center">
                                <div class="spinner-border text-success" role="status"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Health Profundo -->
                <div class="col-md-6 mb-3">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <i class="bi bi-heart-pulse"></i> Health Check Profundo
                        </div>
                        <div class="card-body" id="admin-health-deep">
                            <div class="text-center">
                                <div class="spinner-border text-primary" role="status"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats -->
            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <i class="bi bi-bar-chart"></i> Estat√≠sticas do Sistema
                </div>
                <div class="card-body" id="admin-stats">
                    <div class="text-center">
                        <div class="spinner-border text-info" role="status"></div>
                    </div>
                </div>
            </div>

            <!-- Limpeza -->
            <div class="card">
                <div class="card-header bg-warning">
                    <i class="bi bi-trash"></i> Limpeza do Sistema
                </div>
                <div class="card-body">
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        <strong>Aten√ß√£o:</strong> Esta opera√ß√£o pode remover arquivos tempor√°rios e cache.
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="cleanup-deep">
                        <label class="form-check-label" for="cleanup-deep">
                            <strong>Limpeza profunda (deep cleanup)</strong>
                        </label>
                    </div>
                    <button class="btn btn-warning" onclick="app.performCleanup()">
                        <i class="bi bi-trash"></i> Executar Limpeza
                    </button>
                </div>
            </div>

            <div class="text-center mt-4">
                <button class="btn btn-primary btn-lg" onclick="app.loadAdminSection()">
                    <i class="bi bi-arrow-clockwise"></i> Atualizar Informa√ß√µes
                </button>
            </div>
        </section>

        <!-- ==================== FEATURE FLAGS ==================== -->
        <section id="section-feature-flags" class="content-section" style="display: none;">
            <h1 class="mb-4"><i class="bi bi-flag"></i> Feature Flags</h1>
            
            <!-- Buscar flag espec√≠fica -->
            <div class="card mb-4">
                <div class="card-header bg-secondary text-white">
                    <i class="bi bi-search"></i> Consultar Flag Espec√≠fica
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-5 mb-2">
                            <input type="text" class="form-control" id="flag-name" 
                                placeholder="Nome da feature (ex: f5tts_engine)">
                        </div>
                        <div class="col-md-4 mb-2">
                            <input type="text" class="form-control" id="flag-user-id" 
                                placeholder="User ID (opcional)">
                        </div>
                        <div class="col-md-3 mb-2">
                            <button class="btn btn-secondary w-100" onclick="app.checkFeatureFlag()">
                                <i class="bi bi-search"></i> Checar
                            </button>
                        </div>
                    </div>
                    <div id="flag-result" class="mt-3"></div>
                </div>
            </div>

            <!-- Lista de todas as flags -->
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-list-ul"></i> Todas as Feature Flags
                    <button class="btn btn-sm btn-light float-end" onclick="app.loadFeatureFlags()">
                        <i class="bi bi-arrow-clockwise"></i> Atualizar
                    </button>
                </div>
                <div class="card-body" id="feature-flags-list">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status"></div>
                        <p class="mt-2">Carregando feature flags...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== TRAINING ==================== -->
        <section id="section-training" class="content-section" style="display:none;">
            <h1><i class="bi bi-cpu-fill"></i> Fine-tuning XTTS-v2</h1>
            <p class="lead text-muted">Treine seu pr√≥prio modelo de voz personalizado</p>

            <!-- Tabs Navigation -->
            <ul class="nav nav-tabs mb-4" id="training-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="dataset-tab" data-bs-toggle="tab" 
                        data-bs-target="#dataset-panel" type="button" role="tab">
                        <i class="bi bi-folder"></i> Dataset
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="training-config-tab" data-bs-toggle="tab" 
                        data-bs-target="#training-panel" type="button" role="tab">
                        <i class="bi bi-gear"></i> Treinamento
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="inference-tab" data-bs-toggle="tab" 
                        data-bs-target="#inference-panel" type="button" role="tab">
                        <i class="bi bi-mic"></i> Infer√™ncia
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="training-tab-content">
                
                <!-- Dataset Tab -->
                <div class="tab-pane fade show active" id="dataset-panel" role="tabpanel">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card mb-3">
                                <div class="card-header bg-primary text-white">
                                    <i class="bi bi-cloud-download"></i> Download de V√≠deos
                                </div>
                                <div class="card-body">
                                    <form id="form-download-videos">
                                        <div class="mb-3">
                                            <label class="form-label">URLs do YouTube (uma por linha)</label>
                                            <textarea class="form-control" id="youtube-urls" rows="5" 
                                                placeholder="https://youtube.com/watch?v=...&#10;https://youtube.com/watch?v=..."></textarea>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Pasta de Destino</label>
                                            <input type="text" class="form-control" id="dataset-folder" 
                                                value="datasets/my_voice" placeholder="datasets/my_voice">
                                        </div>
                                        <button type="submit" class="btn btn-success" id="btn-download-videos">
                                            <span class="btn-icon"><i class="bi bi-download"></i></span>
                                            <span class="btn-text">Iniciar Download</span>
                                            <span class="spinner-border spinner-border-sm btn-spinner d-none" role="status">
                                                <span class="visually-hidden">Baixando...</span>
                                            </span>
                                        </button>
                                    </form>
                                    <div id="download-progress" class="mt-3" style="display:none;">
                                        <div class="progress">
                                            <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                                id="download-progress-bar" style="width: 0%"></div>
                                        </div>
                                        <small class="text-muted" id="download-status"></small>
                                    </div>
                                </div>
                            </div>

                            <div class="card mb-3">
                                <div class="card-header bg-info text-white">
                                    <i class="bi bi-scissors"></i> Segmenta√ß√£o & Prepara√ß√£o
                                </div>
                                <div class="card-body">
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label class="form-label">Dura√ß√£o M√≠nima (s)</label>
                                            <input type="number" class="form-control" id="segment-min-duration" 
                                                value="7" min="3" max="15">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Dura√ß√£o M√°xima (s)</label>
                                            <input type="number" class="form-control" id="segment-max-duration" 
                                                value="12" min="5" max="20">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">VAD Threshold (dB)</label>
                                        <input type="number" class="form-control" id="vad-threshold" 
                                            value="-40" min="-60" max="-20">
                                    </div>
                                    <button class="btn btn-info" id="btn-segment-audio" onclick="app.segmentAudio()">
                                        <span class="btn-icon"><i class="bi bi-scissors"></i></span>
                                        <span class="btn-text">Segmentar √Åudios</span>
                                        <span class="spinner-border spinner-border-sm btn-spinner d-none"></span>
                                    </button>
                                    <button class="btn btn-warning ms-2" id="btn-transcribe-dataset" onclick="app.transcribeDataset()">
                                        <span class="btn-icon"><i class="bi bi-file-text"></i></span>
                                        <span class="btn-text">Gerar Transcri√ß√µes</span>
                                        <span class="spinner-border spinner-border-sm btn-spinner d-none"></span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header bg-secondary text-white">
                                    <i class="bi bi-bar-chart"></i> Estat√≠sticas do Dataset
                                </div>
                                <div class="card-body" id="dataset-stats">
                                    <div class="text-center text-muted">
                                        <i class="bi bi-folder-x" style="font-size: 3rem;"></i>
                                        <p class="mt-2">Nenhum dataset carregado</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card mt-3">
                                <div class="card-header bg-dark text-white">
                                    <i class="bi bi-list"></i> Arquivos
                                </div>
                                <div class="card-body p-0" style="max-height: 300px; overflow-y: auto;" id="dataset-files">
                                    <p class="p-3 text-muted mb-0">Nenhum arquivo encontrado</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Training Tab -->
                <div class="tab-pane fade" id="training-panel" role="tabpanel">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card mb-3">
                                <div class="card-header bg-success text-white">
                                    <i class="bi bi-gear"></i> Configura√ß√£o de Treinamento
                                </div>
                                <div class="card-body">
                                    <form id="form-training-config">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Nome do Modelo</label>
                                                <input type="text" class="form-control" id="model-name" 
                                                    placeholder="my_voice_model" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Dataset</label>
                                                <select class="form-select" id="training-dataset" required>
                                                    <option value="">Carregando datasets...</option>
                                                </select>
                                                <small class="form-text text-muted">
                                                    Datasets dispon√≠veis em /train/data/
                                                </small>
                                            </div>
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-md-4">
                                                <label class="form-label">Epochs</label>
                                                <input type="number" class="form-control" id="training-epochs" 
                                                    value="100" min="10" max="1000">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Batch Size</label>
                                                <input type="number" class="form-control" id="training-batch-size" 
                                                    value="4" min="1" max="16">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Learning Rate</label>
                                                <input type="number" class="form-control" id="training-lr" 
                                                    value="0.0001" step="0.0001" min="0.00001" max="0.01">
                                            </div>
                                        </div>

                                        <div class="mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="training-use-deepspeed">
                                                <label class="form-check-label" for="training-use-deepspeed">
                                                    Usar DeepSpeed (requer m√∫ltiplas GPUs)
                                                </label>
                                            </div>
                                        </div>

                                        <button type="submit" class="btn btn-success" id="btn-start-training">
                                            <span class="btn-icon"><i class="bi bi-play-fill"></i></span>
                                            <span class="btn-text">Iniciar Treinamento</span>
                                            <span class="spinner-border spinner-border-sm btn-spinner d-none" role="status">
                                                <span class="visually-hidden">Carregando...</span>
                                            </span>
                                        </button>
                                        <button type="button" class="btn btn-danger" id="btn-stop-training" 
                                            style="display:none;" onclick="app.stopTraining()">
                                            <span class="btn-icon"><i class="bi bi-stop-fill"></i></span>
                                            <span class="btn-text">Parar</span>
                                            <span class="spinner-border spinner-border-sm btn-spinner d-none" role="status">
                                                <span class="visually-hidden">Carregando...</span>
                                            </span>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <!-- Sprint 3 Task 3.1: Enhanced Training Status Card -->
                            <div class="card" id="training-status-card">
                                <div class="card-header" id="training-status-header">
                                    <i class="bi bi-info-circle"></i> Status do Treinamento
                                </div>
                                <div class="card-body" id="training-status">
                                    <div class="text-center text-muted py-3">
                                        <i class="bi bi-hourglass" style="font-size: 2rem;"></i>
                                        <p class="mb-0 mt-2">Aguardando in√≠cio</p>
                                    </div>
                                </div>
                            </div>

                            <div class="card mt-3">
                                <div class="card-header bg-primary text-white">
                                    <i class="bi bi-clock-history"></i> Checkpoints
                                </div>
                                <div class="card-body p-0" style="max-height: 200px; overflow-y: auto;" id="checkpoint-list">
                                    <p class="p-3 text-muted mb-0">Nenhum checkpoint dispon√≠vel</p>
                                </div>
                            </div>

                            <!-- Sprint 0 Fix: Training Samples Card -->
                            <div class="card mt-3">
                                <div class="card-header bg-success text-white">
                                    <i class="bi bi-music-note-beamed"></i> Training Samples
                                    <small class="float-end">√Åudio gerado a cada √©poca</small>
                                </div>
                                <div class="card-body p-0">
                                    <div id="training-samples-list" class="list-group list-group-flush" style="max-height: 400px; overflow-y: auto;">
                                        <div class="text-center p-3">
                                            <div class="spinner-border text-success" role="status"></div>
                                            <p class="text-muted mt-2 mb-0">Carregando amostras...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-header bg-dark text-white">
                            <i class="bi bi-terminal"></i> Logs de Treinamento
                            <button class="btn btn-sm btn-outline-light float-end" onclick="app.clearTrainingLogs()">
                                <i class="bi bi-trash"></i> Limpar
                            </button>
                        </div>
                        <div class="card-body bg-black text-success" style="max-height: 300px; overflow-y: auto;">
                            <pre id="training-logs" class="mb-0" style="font-family: monospace; font-size: 0.85rem;">Aguardando logs...</pre>
                        </div>
                    </div>
                </div>

                <!-- Inference Tab -->
                <div class="tab-pane fade" id="inference-panel" role="tabpanel">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card mb-3">
                                <div class="card-header bg-info text-white">
                                    <i class="bi bi-mic"></i> Testar Modelo Treinado
                                </div>
                                <div class="card-body">
                                    <form id="form-inference-test">
                                        <div class="mb-3">
                                            <label class="form-label">Checkpoint</label>
                                            <select class="form-select" id="inference-checkpoint" required>
                                                <option value="">Selecione um checkpoint...</option>
                                            </select>
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label">Texto de Teste</label>
                                            <textarea class="form-control" id="inference-text" rows="3" 
                                                placeholder="Digite o texto para sintetizar..." required></textarea>
                                        </div>

                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Temperatura</label>
                                                <input type="number" class="form-control" id="inference-temperature" 
                                                    value="0.7" step="0.1" min="0.1" max="1.5">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Speed</label>
                                                <input type="number" class="form-control" id="inference-speed" 
                                                    value="1.0" step="0.1" min="0.5" max="2.0">
                                            </div>
                                        </div>

                                        <button type="submit" class="btn btn-success">
                                            <i class="bi bi-play-fill"></i> Sintetizar
                                        </button>
                                    </form>

                                    <div id="inference-result" class="mt-4" style="display:none;">
                                        <h6>Resultado:</h6>
                                        <audio controls class="w-100" id="inference-audio"></audio>
                                        <div class="mt-2">
                                            <button class="btn btn-sm btn-primary" onclick="app.downloadInferenceAudio()">
                                                <i class="bi bi-download"></i> Download
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header bg-secondary text-white">
                                    <i class="bi bi-graph-up"></i> Compara√ß√£o A/B
                                </div>
                                <div class="card-body">
                                    <p class="small text-muted">Compare o modelo base vs. fine-tuned</p>
                                    
                                    <div class="mb-3">
                                        <strong>Modelo Base (XTTS-v2)</strong>
                                        <audio controls class="w-100 mt-1" id="ab-audio-base"></audio>
                                    </div>

                                    <div class="mb-3">
                                        <strong>Modelo Fine-tuned</strong>
                                        <audio controls class="w-100 mt-1" id="ab-audio-finetuned"></audio>
                                    </div>

                                    <button class="btn btn-sm btn-warning w-100" onclick="app.generateABComparison()">
                                        <i class="bi bi-arrow-repeat"></i> Gerar Compara√ß√£o
                                    </button>
                                </div>
                            </div>

                            <div class="card mt-3">
                                <div class="card-header bg-success text-white">
                                    <i class="bi bi-check-circle"></i> Qualidade
                                </div>
                                <div class="card-body" id="quality-metrics">
                                    <p class="text-muted small mb-0">Execute uma compara√ß√£o A/B para ver m√©tricas de qualidade</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

    </div>

    <!-- ==================== MODALS ==================== -->

    <!-- Modal: Job Details -->
    <div class="modal fade" id="modal-job-details" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-info-circle"></i> Detalhes do Job
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modal-job-details-body">
                    <div class="text-center">
                        <div class="spinner-border" role="status"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Download Formats -->
    <div class="modal fade" id="modal-download-formats" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <i class="bi bi-download"></i> Escolha o Formato
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <p class="text-muted mb-3">Selecione o formato de √°udio para download:</p>
                    <div class="d-grid gap-2" id="modal-download-formats-body">
                        <!-- Buttons populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Voice Details -->
    <div class="modal fade" id="modal-voice-details" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-person-voice"></i> Detalhes da Voz
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modal-voice-details-body">
                    <div class="text-center">
                        <div class="spinner-border" role="status"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Create Quality Profile -->
    <div class="modal fade" id="modal-create-profile" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-plus-circle"></i> Criar Perfil de Qualidade
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="form-create-quality-profile">
                        <!-- Campos Comuns -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Nome do Perfil *</label>
                                <input type="text" class="form-control" id="qp-name" required 
                                    placeholder="Ex: high_quality, fast_mode">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Engine *</label>
                                <select class="form-select" id="qp-engine" required>
                                    <option value="xtts">XTTS</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descri√ß√£o</label>
                            <textarea class="form-control" id="qp-description" rows="2" 
                                placeholder="Descreva o uso ideal deste perfil..."></textarea>
                        </div>
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="qp-is-default">
                            <label class="form-check-label" for="qp-is-default">
                                Definir como perfil padr√£o do engine
                            </label>
                        </div>

                        <!-- Par√¢metros XTTS -->
                        <div id="qp-xtts-params" class="params-group">
                            <h6 class="text-primary mb-3">
                                <i class="bi bi-sliders"></i> Par√¢metros XTTS
                            </h6>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">
                                        Temperatura (0.1 - 1.0)
                                        <i class="bi bi-info-circle" title="Criatividade vs Estabilidade. Maior = mais criativo"></i>
                                    </label>
                                    <input type="number" class="form-control" id="qp-xtts-temperature" 
                                        min="0.1" max="1.0" step="0.05" value="0.75">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">
                                        Velocidade (0.5 - 2.0)
                                        <i class="bi bi-info-circle" title="Multiplier de velocidade da fala"></i>
                                    </label>
                                    <input type="number" class="form-control" id="qp-xtts-speed" 
                                        min="0.5" max="2.0" step="0.1" value="1.0">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">
                                        Penalidade de Repeti√ß√£o (1.0 - 3.0)
                                        <i class="bi bi-info-circle" title="Maior = menos repeti√ß√µes"></i>
                                    </label>
                                    <input type="number" class="form-control" id="qp-xtts-repetition-penalty" 
                                        min="1.0" max="3.0" step="0.1" value="1.5">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">
                                        Top-P (0.5 - 1.0)
                                        <i class="bi bi-info-circle" title="Nucleus sampling - diversidade"></i>
                                    </label>
                                    <input type="number" class="form-control" id="qp-xtts-top-p" 
                                        min="0.5" max="1.0" step="0.05" value="0.9">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">
                                        Top-K (10 - 100)
                                        <i class="bi bi-info-circle" title="N√∫mero de tokens candidatos"></i>
                                    </label>
                                    <input type="number" class="form-control" id="qp-xtts-top-k" 
                                        min="10" max="100" step="5" value="60">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">
                                        Penalidade de Comprimento (0.5 - 2.0)
                                        <i class="bi bi-info-circle" title="Controle de dura√ß√£o"></i>
                                    </label>
                                    <input type="number" class="form-control" id="qp-xtts-length-penalty" 
                                        min="0.5" max="2.0" step="0.1" value="1.2">
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="qp-xtts-enable-text-splitting">
                                <label class="form-check-label" for="qp-xtts-enable-text-splitting">
                                    Dividir texto longo em senten√ßas (recomendado para textos grandes)
                                </label>
                            </div>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="qp-f5tts-apply-declipping" checked>
                                        <label class="form-check-label" for="qp-f5tts-apply-declipping">
                                            Remover clipping
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="qp-f5tts-apply-deessing" checked>
                                        <label class="form-check-label" for="qp-f5tts-apply-deessing">
                                            Reduzir sibil√¢ncia (S/SH)
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">Freq. De-essing (Hz)</label>
                                    <input type="number" class="form-control" id="qp-f5tts-deessing-frequency" 
                                        min="4000" max="10000" step="500" value="6000">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="qp-f5tts-add-breathing" checked>
                                        <label class="form-check-label" for="qp-f5tts-add-breathing">
                                            Adicionar respira√ß√£o natural
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Intensidade da Respira√ß√£o (0.0 - 1.0)</label>
                                    <input type="number" class="form-control" id="qp-f5tts-breathing-strength" 
                                        min="0.0" max="1.0" step="0.1" value="0.3">
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="qp-f5tts-pause-optimization" checked>
                                <label class="form-check-label" for="qp-f5tts-pause-optimization">
                                    Otimizar pausas entre frases
                                </label>
                            </div>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="submit" class="btn btn-success">
                                <i class="bi bi-save"></i> Criar Perfil
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Edit Quality Profile -->
    <!-- BUG-03 FIX: Modal Edit agora usa formul√°rio estruturado igual ao Create -->
    <div class="modal fade" id="modal-edit-profile" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-pencil"></i> Editar Perfil de Qualidade
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="form-edit-quality-profile">
                        <input type="hidden" id="edit-qp-id">
                        <input type="hidden" id="edit-qp-engine">
                        
                        <!-- Campos Comuns -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Nome do Perfil *</label>
                                <input type="text" class="form-control" id="edit-qp-name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Engine</label>
                                <input type="text" class="form-control" id="edit-qp-engine-display" disabled>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descri√ß√£o</label>
                            <textarea class="form-control" id="edit-qp-description" rows="2"></textarea>
                        </div>
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="edit-qp-is-default">
                            <label class="form-check-label" for="edit-qp-is-default">
                                Definir como perfil padr√£o do engine
                            </label>
                        </div>

                        <!-- Par√¢metros XTTS -->
                        <div id="edit-qp-xtts-params" class="params-group">
                            <h6 class="text-primary mb-3">
                                <i class="bi bi-sliders"></i> Par√¢metros XTTS
                            </h6>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Temperatura (0.1 - 1.0)</label>
                                    <input type="number" class="form-control" id="edit-qp-xtts-temperature" 
                                        min="0.1" max="1.0" step="0.05">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Velocidade (0.5 - 2.0)</label>
                                    <input type="number" class="form-control" id="edit-qp-xtts-speed" 
                                        min="0.5" max="2.0" step="0.1">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Penalidade de Repeti√ß√£o (1.0 - 3.0)</label>
                                    <input type="number" class="form-control" id="edit-qp-xtts-repetition-penalty" 
                                        min="1.0" max="3.0" step="0.1">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Top-P (0.5 - 1.0)</label>
                                    <input type="number" class="form-control" id="edit-qp-xtts-top-p" 
                                        min="0.5" max="1.0" step="0.05">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Top-K (10 - 100)</label>
                                    <input type="number" class="form-control" id="edit-qp-xtts-top-k" 
                                        min="10" max="100" step="5">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Penalidade de Comprimento (0.5 - 2.0)</label>
                                    <input type="number" class="form-control" id="edit-qp-xtts-length-penalty" 
                                        min="0.5" max="2.0" step="0.1">
                                </div>
                            </div>
                            
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="edit-qp-xtts-enable-text-splitting">
                                <label class="form-check-label" for="edit-qp-xtts-enable-text-splitting">
                                    Dividir texto longo em senten√ßas
                                </label>
                            </div>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-info" id="btn-duplicate-from-edit" onclick="app.duplicateProfileFromEdit()">
                                <i class="bi bi-files"></i> Duplicar
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i> Salvar Altera√ß√µes
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Confirm Delete -->
    <div class="modal fade" id="modal-confirm-delete" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">
                        <i class="bi bi-exclamation-triangle"></i> Confirmar Exclus√£o
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="modal-confirm-delete-body">
                    Tem certeza que deseja excluir este item?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="btn-confirm-delete">
                        <i class="bi bi-trash"></i> Excluir
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
